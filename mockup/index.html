<!doctype html>
<html>

<head>

  <title>294</title>

  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

  <script src="./bower_components/webcomponentsjs/webcomponents.js"> </script>
  <link rel="import" href="./bower_components/font-roboto/roboto.html">
  <link rel="import" href="./bower_components/core-header-panel/core-header-panel.html">
  <link rel="import" href="./bower_components/core-toolbar/core-toolbar.html">
  <link rel="import" href="./bower_components/paper-tabs/paper-tabs.html">
  <link rel="import" href="./bower_components/paper-icon-button/paper-icon-button.html">
  <link rel="import" href="stock-list.html">
  <link rel="import" href="stock-card.html">
  <link rel="import" href="stock-card-earnings.html">
  <script src="//code.highcharts.com/stock/highstock.js"></script>
  <script type="text/javascript" src="js/purl.js"></script>
  <script type="text/javascript" src="js/InteractiveChartApi.js"></script>

  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

</head>

<body unresolved>

  <core-header-panel>

    <core-toolbar>
    <paper-icon-button id="navBtn" icon="menu" role="button" aria-label="menu"></paper-icon-button>

    <h1>STCK.CO</h1>

    </core-toolbar>

 <div class="nav">
         <h2>Welcome, Anthony!</h2>
         <ul class="links">
           <li>Profile</li>
           <li>Settings</li>
         </ul>

         <h2>Stocks</h2>
          <stock-list show="all"></stock-list>
 </div>
 <div class="main">
  <stock-card>
    <h2>GOOG</h2>
    <p>StkSymbl</p>
    <p class="growth">10%</p>
    <p class="price">$500.00</p>
    <div class="graph" id="chartContainer" style="height: 400px; min-width: 310px"></div>
  </stock-card>
  <stock-card-earnings>
   <h2>Google, Inc</h2>
   <p class="lastEarnings">Jul 2</p>
   <p class="nextEarnings">Aug 2</p>
   </stock-card-earnings>
 </div>
 
  </core-header-panel>

  <script>
  var tabs = document.querySelector('paper-tabs');
  var list = document.querySelector('stock-list');
  var navbtn = document.querySelector('paper-icon-button');

  navbtn.addEventListener('click', function() {
    if ($(".nav").css("opacity") == 1) {
      $(".nav").fadeTo("fast", 0);
      $(".main").animate({ 'marginLeft': '0px'}, 1000);
    } else {
      $(".main").animate({ 'marginLeft': '300px'}, 1000);
      $(".nav").fadeTo("slow", 1);
    }
  });

    $(document).ready(function() {
      var sym = 'AAPL';
      var dur = 3650;
      
      new Markit.InteractiveChartApi(sym, dur);

    });
  </script>
  <script>
   calcGrowth = function(){
      //console.log($(".highcharts-input-group").find($("tspan")).length);
      var firstD = new Date($(".highcharts-input-group").find($("tspan"))[0].textContent);
      var firstDate = Date.UTC(firstD.getFullYear(), firstD.getMonth(), firstD.getDate());

      var lastD = new Date($(".highcharts-input-group").find($("tspan"))[1].textContent);
      var lastDate = Date.UTC(lastD.getFullYear(), lastD.getMonth(), lastD.getDate());

      var lastPrice;
      var firstPrice;
      var found = false;
      for (var i = stockData.length - 1; i > 0; i--) {
        if (stockData[i][0] <= lastDate && !found) {
          lastPrice = stockData[i][1];
          found = true;
        }
        if (stockData[i][0] <= firstDate) {
          firstPrice = stockData[i][1];
          break;
        }
      }
      $(".growth").text(Math.round(1000 * (lastPrice - firstPrice)/firstPrice)/10 + "%");
    };

    addGrowthListener = function() {
      console.log("hello");
      $(".highcharts-series").change(function() {
        console.log("changed");
      });
    };

  </script>

</body>

</html>
